#+LATEX_HEADER: \usepackage{xeCJK}
#+LATEX_HEADER: \setCJKmainfont{STKaiti}
#+OPTIONS: \n:t ^:nil  toc:nil
#+TODO: TODO(t) STARTED(s) WAITING(w) | DONE(d) CANCELED(c)

* 资源情况：
** nor空间
+-------------------------+-----------+-------------+
| module name             | code size | rodata size |
+-------------------------+-----------+-------------+
| 解码库                  | 242,340   |     129,772 |
+-------------------------+-----------+-------------+
| wifi固件                | 146,136   |     177,572 |
+-------------------------+-----------+-------------+
| 故事机应用              | 95,896    |       1,702 |
+-------------------------+-----------+-------------+
| actions应用框架核心服务 | 72,680    |         390 |
| 应用框架开源部分        | 5,712     |         156 |
+-------------------------+-----------+-------------+
| 网络核心协议栈          | 37,680    |           6 |
| 网络上层协议库          | 19,440    |         676 |
| md5加密库               | 6,812     |         320 |
+-------------------------+-----------+-------------+
| 文件系统                | 14,740    |      87,196 |
+-------------------------+-----------+-------------+
| 内核                    | 23,568    |          40 |
| 设备驱动                | 28,004    |         278 |
+-------------------------+-----------+-------------+
| c库                     | 6,112     |           0 |
| CPU移植相关             | 4,084     |         144 |
+-------------------------+-----------+-------------+
| 蓝牙BLE协议栈           | 20,972    |         341 |
| 蓝牙 BLE baseband       | 29,406    |       2,290 |
| 蓝牙驱动                | 1,968     |           0 |
| 声波配网                | 10,636    |       1,180 |
+-------------------------+-----------+-------------+
| usb读卡器               | 3,212     |          24 |
+-------------------------+-----------+-------------+

说明：
解码库： 372K
wifi代码和wifi固件： 323K
故事机应用：97K
应用框架：77K
网络协议栈和协议：64K
文件系统：102K，其中87k是一个中文支持的码表
内核驱动c库：60K
BLE和声波配网 60K

** 内存数据

| module name             | data size |
| actions应用框架核心服务 |    31,102 |
| 应用框架开源部分        |    14,753 |
| 网络核心协议栈          |    24,441 |
| 网络上层协议库          |         0 |
| wifi固件                |     8,995 |
| 内核                    |     6,632 |
| 设备驱动                |     3,999 |
| 故事机应用              |     3,032 |
| CPU移植相关             |       584 |
| 解码库                  |       340 |
| 蓝牙BLE协议栈           |       280 |
| usb读卡器               |       194 |
| 文件系统                |       131 |
| lc库                    |         4 |
| 蓝牙 BLE baseband       |         0 |
| 声波配网                |         0 |
| md5加密库               |         0 |
| 蓝牙驱动                |         0 |

说明：
+ 解码库部分  53k
  不同编码格式和解码格式是共用内存的， 相互overlay，最大的overy是53K
+ 系统框架和核心服务  31K
  主要是两部分核心服务使用的heap和stack，启动heap 17k， stack 12k左右， heap中还包含了wifi驱动使用的动态内存。
+ 应用开源部分 14
  提供给用用程序使用的堆， 和系统核心服务使用的heap分开管理
+ 网络协议栈部分 24K
  主要是网络使用的buffer， 总共10个， 每个1.6k，以及其他的一些小buffer，
+ wifi驱动  9k
  wifi固件这部分主要是驱动使用的静态内存部分，主要是一个比较大的stack。wifi驱动使用动态内存都在应用框架的heak中分配
+ 内核和其他驱动 10K
+ 蓝牙和声波配网 0K
  都是和解码库使用的内存进行overlay的，

** 运行性能
之前抓过一个数据如下
场景：
网络通过http协议下载320kbps的mp3， 同时通过usb读卡器写卡， 应用通过文件系统读卡，解码，播放
硬件参数：
cpu跑156M，使用mips32指令集， spi nor 4线， 频率 48Mhz
性能数据：
20%的时间idle， 剩下80%的时间，其中的40%的时间在cache miss， 折算过来全速跑的cpu频率是80M左右，
老赵给的数据320kbps的解码需要50M， 所以系统需要的性能就是30M左右了。

** 详细的数据
| module name |code size|data size|rodata size|overlay data size|
| actions应用框架核心服务    | 72,680  | 31,102 |     390 |  16,651 |
| 网络核心协议栈             | 37,680  | 24,441 |       6 |     136 |
| 应用框架开源部分           | 5,712   | 14,753 |     156 |       0 |
| wifi固件                   | 146,136 |  8,995 | 177,572 |       0 |
| 内核                       | 23,568  |  6,632 |      40 |       0 |
| 设备驱动                   | 28,004  |  3,999 |     278 |       4 |
| 故事机应用                 | 95,896  |  3,032 |   1,702 |       4 |
| CPU移植相关                | 4,084   |    584 |     144 |       0 |
| 解码库                     | 242,340 |    340 | 129,772 | 240,878 |
| 蓝牙BLE协议栈              | 20,972  |    280 |     341 |   5,956 |
| usb读卡器                  | 3,212   |    194 |      24 |       0 |
| 文件系统                   | 14,740  |    131 |  87,196 |       0 |
| lc库                       | 6,112   |      4 |       0 |       0 |
| 蓝牙 BLE baseband          | 29,406  |      0 |   2,290 |   1,228 |
| 网络上层协议库             | 19,440  |      0 |     676 |       0 |
| 声波配网                   | 10,636  |      0 |   1,180 |  22,548 |
| md5加密库                  | 6,812   |      0 |     320 |       0 |
| 蓝牙驱动                   | 1,968   |      0 |       0 |       5 |
